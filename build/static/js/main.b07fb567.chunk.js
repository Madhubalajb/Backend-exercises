(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=(a(80),a(70)),i=a(23),s=a(74),u=a(10),m=a(134),d=a(65),f=a.n(d),p=a(130),b=a(66),E=function(e){return r.a.createElement(p.a,null,r.a.createElement(b.a,{sm:"3"},r.a.createElement(p.a.Control,{className:"filter",title:"Search by Name",onChange:e.filters,placeholder:"Search Contacts ..."})))},h=function(e){var t=e.filteredItems;return 0===t.length?r.a.createElement("div",{className:"none"},r.a.createElement("i",{className:"material-icons"},"call_end"),r.a.createElement("p",null,"create some by logging in / Signing up...")):r.a.createElement("div",null,t.map(function(t){return r.a.createElement("div",{key:t.id,className:"contact"},r.a.createElement("i",{className:"material-icons person"},"assignment_ind"),r.a.createElement("span",{className:"name"},t.name)," - ",r.a.createElement("span",{className:"number"},t.number),r.a.createElement("i",{className:"material-icons delete",title:"Delete Contact",onClick:function(){return e.remove(t)}},"delete"))}))},v=a(128),g=a(129),w=function(e){return r.a.createElement(p.a,{onSubmit:e.add},r.a.createElement(v.a,null,r.a.createElement(b.a,{sm:"2"},r.a.createElement("i",{className:"material-icons"},"person_add")),r.a.createElement(b.a,{sm:"10"},r.a.createElement(p.a.Control,{onChange:e.person,value:e.newPerson||"",placeholder:"Contact Name",required:!0}))),r.a.createElement(v.a,null,r.a.createElement(b.a,{sm:"2"},r.a.createElement("i",{className:"material-icons"},"phone")),r.a.createElement(b.a,{sm:"10"},r.a.createElement(p.a.Control,{onChange:e.number,value:e.newNumber||"",placeholder:"Phone Number",required:!0}))),r.a.createElement(g.a,{className:"btn-sm btn_icon",type:"submit",title:"Add Contact"},r.a.createElement("i",{className:"material-icons"},"add_circle"),r.a.createElement("span",null,"Add")))},k=function(e){return null===e.msg?null:e.msg},O=a(6),N=a.n(O),j=a(13),y=a(20),S=a.n(y),C="/api/persons",x=null,_={setToken:function(e){x="bearer ".concat(e)},getData:function(){var e=Object(j.a)(N.a.mark(function e(){var t;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(C);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),addData:function(){var e=Object(j.a)(N.a.mark(function e(t){var a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:x}},e.next=3,S.a.post(C,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),deleteData:function(){var e=Object(j.a)(N.a.mark(function e(t){var a,n;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:x}},e.next=3,S.a.delete("".concat(C,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateData:function(){var e=Object(j.a)(N.a.mark(function e(t,a){var n,r;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:x}},e.next=3,S.a.put("".concat(C,"/").concat(t),a,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},P=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),i=l[0],d=l[1],p=Object(n.useState)(""),b=Object(u.a)(p,2),v=b[0],g=b[1],O=Object(n.useState)(""),N=Object(u.a)(O,2),j=N[0],y=N[1],S=Object(n.useState)(""),C=Object(u.a)(S,2),x=C[0],P=C[1],D=Object(n.useState)(""),A=Object(u.a)(D,2),L=A[0],T=A[1];Object(n.useEffect)(function(){var e=window.localStorage.getItem("logged_PhoneApp_User");if(e){var t=JSON.parse(e);T(t),_.getData().then(function(t){return c(t.filter(function(t){return t.user.id===JSON.parse(e).id}))})}else T("")},[]);var U=function(e){P(e),setTimeout(function(){P(null)},3e3)},B=function(){d(""),g("")},I=a.filter(function(e){return-1!==e.name.toLowerCase().indexOf(j.toLowerCase())});return r.a.createElement("center",{className:"container"},r.a.createElement(k,{msg:x}),r.a.createElement("div",null,r.a.createElement("img",{className:"phonebook_logo",src:f.a,alt:"Phonebook Logo"}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{filters:function(e){return y(e.target.value)}})),r.a.createElement("div",{className:"row main-row"},r.a.createElement(m.a,{className:"col-sm-6"},r.a.createElement("h2",null,"Add a contact"),r.a.createElement(w,{add:function(e){if(e.preventDefault(),""===L)U(r.a.createElement("div",{id:"snackbar"},"Please Login / Signup before adding contacts")),B();else if(function(e){if(isNaN(Number(e)))return!1;for(var t=String(e),a=0,n=0;n<t.length;n++)"0"===t[n]&&(a+=1);return a!==t.length}(v))if(a.some(function(e){return e.name===i})){if(window.confirm("".concat(i," is already exists, do you want to replace the number?"))){var t=a.find(function(e){return e.name===i}),n=Object(s.a)({},t,{number:v});_.updateData(n.id,n).then(function(e){c(a.map(function(t){return t.id!==n.id?t:e})),U(r.a.createElement("div",{id:"snackbar"},"Updated contact ",n.name)),B()}).catch(function(e){U(r.a.createElement("div",{id:"snackbar"},i," has already been deleted")),B()})}}else{var o={name:i,number:v,id:a.length+1};_.addData(o).then(function(e){c(a.concat(e)),U(r.a.createElement("div",{id:"snackbar"},"Added contact ",i)),B()}).catch(function(e){U(r.a.createElement("div",{id:"snackbar"},"Person validation failed: Name & Number should be a length of minimum 3, 8 respectively. ")),B()})}else U(r.a.createElement("div",{id:"snackbar"},"Please enter valid Number")),B()},person:function(e){return d(e.target.value)},number:function(e){return g(e.target.value)},newNumber:v,newPerson:i})),r.a.createElement(m.a,{className:"col-sm-6"},r.a.createElement("h2",null,"Contacts"),r.a.createElement(h,{filteredItems:I,remove:function(e){window.confirm("Wanna delete ".concat(e.name,"?"))&&_.deleteData(e.id).then(function(t){c(a.filter(function(t){return t.id!==e.id})),U(r.a.createElement("div",{id:"snackbar"},"Deleted contact ",e.name))}).catch(function(e){U(r.a.createElement("div",{id:"snackbar"},"Person ",i," has already been deleted"))})}}))),r.a.createElement("div",{className:"footer"},r.a.createElement("a",{className:"fab fa-github",href:"https://github.com/Madhubalajb/FullStackOpen-Exercises/tree/master/part2/part2-b(phone_book)",rel:"noopener noreferrer",target:"_blank"}),"built by ",r.a.createElement("a",{href:"https://madhubalajb.github.io/",rel:"noopener noreferrer",target:"_blank"},"madhubala jayakumaran")))},D=a(133),A=a(132),L=a(131),T=function(e){return r.a.createElement(L.a,{show:e.show,onHide:e.close},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement("b",null,"Login")),r.a.createElement(L.a.Body,null,r.a.createElement(p.a,{onSubmit:e.login},r.a.createElement(p.a.Control,{type:"text",placeholder:"Username",onChange:e.username,required:!0}),r.a.createElement(p.a.Control,{type:"password",placeholder:"Password",onChange:e.pwd,required:!0}),r.a.createElement("center",null,r.a.createElement(g.a,{type:"submit"},"Login")))))},U=function(e){return r.a.createElement(L.a,{show:e.show,onHide:e.close},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement("b",null,"Signup")),r.a.createElement(L.a.Body,null,r.a.createElement(p.a,{onSubmit:e.signup},r.a.createElement(p.a.Control,{type:"text",placeholder:"Name",onChange:e.name,required:!0}),r.a.createElement(p.a.Control,{type:"text",placeholder:"Username",onChange:e.username,required:!0}),r.a.createElement(p.a.Control,{type:"password",placeholder:"Password",onChange:e.pwd,required:!0}),r.a.createElement("center",null,r.a.createElement(g.a,{type:"submit"},"Signup")))))},B={login:function(){var e=Object(j.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},I={signup:function(){var e=Object(j.a)(N.a.mark(function e(t){var a;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},q=function(){var e=Object(n.useState)(!1),t=Object(u.a)(e,2),a=t[0],c=t[1],o=function(){return c(!1)},l=Object(n.useState)(!1),i=Object(u.a)(l,2),s=i[0],m=i[1],d=function(){return m(!1)},f=Object(n.useState)(""),p=Object(u.a)(f,2),b=p[0],E=p[1],h=Object(n.useState)(""),v=Object(u.a)(h,2),g=v[0],w=v[1],O=Object(n.useState)(""),y=Object(u.a)(O,2),S=y[0],C=y[1],x=Object(n.useState)(""),P=Object(u.a)(x,2),D=P[0],L=P[1],q=Object(n.useState)(""),H=Object(u.a)(q,2),J=H[0],z=H[1];Object(n.useEffect)(function(){var e=window.localStorage.getItem("logged_PhoneApp_User");if(e){var t=JSON.parse(e);E(t),_.setToken(t.token)}},[]);var W=function(e){z(e),setTimeout(function(){z(null)},3e3)},F=function(){w(""),C(""),L(""),o(),d()},M=function(e){return C(e.target.value)},$=function(e){return L(e.target.value)},G=function(){var e=Object(j.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,B.login({username:S,password:D}).then(function(e){window.localStorage.setItem("logged_PhoneApp_User",JSON.stringify(e)),_.setToken(e.token),E(e),F(),W(r.a.createElement("div",{id:"snackbar"},"Hi ",e.username," ",r.a.createElement("i",{className:"material-icons face"},"sentiment_very_satisfied"))),setTimeout(function(){return window.location.reload(!1)},6e3)}).catch(function(e){E(""),F(),W(r.a.createElement("div",{id:"snackbar"},"Username / Password Invalid ",r.a.createElement("i",{className:"material-icons face"},"sentiment_very_dissatisfied")))});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(N.a.mark(function e(t){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,I.signup({name:g,username:S,password:D}).then(function(e){E(""),F(),W(r.a.createElement("div",{id:"snackbar"},"User ",e.username," added ",r.a.createElement("i",{className:"material-icons face"},"sentiment_very_satisfied")))});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return""===b?r.a.createElement("div",null,r.a.createElement(k,{msg:J}),r.a.createElement(A.a.Link,{onClick:function(){return c(!0)}},"Login"),r.a.createElement(T,{show:a,close:o,username:M,pwd:$,login:G}),r.a.createElement(A.a.Link,{onClick:function(){return m(!0)}},"Signup"),r.a.createElement(U,{show:s,close:d,name:function(e){return w(e.target.value)},username:M,pwd:$,signup:K})):r.a.createElement("div",null,r.a.createElement(k,{msg:J}),r.a.createElement(A.a.Link,{onClick:function(){W(r.a.createElement("div",{id:"snackbar"},"Bye ",b.username," ",r.a.createElement("i",{className:"material-icons face"},"sentiment_dissatisfied"))),E(""),window.localStorage.removeItem("logged_PhoneApp_User"),_.setToken(""),setTimeout(function(){return window.location.reload(!1)},6e3)}},"Logout"))},H=function(){return r.a.createElement(D.a,{collapseOnSelect:!0,expand:"sm",className:"fixed-top"},r.a.createElement(D.a.Brand,{href:"/"},r.a.createElement("i",{className:"material-icons house",title:"Home"},"house")),r.a.createElement(D.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(D.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(A.a,{className:"ml-auto"},r.a.createElement(q,null))))},J=function(){return r.a.createElement(l.a,null,r.a.createElement(H,null),r.a.createElement(i.a,{exact:!0,path:"/",component:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(125);o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,a){e.exports=a.p+"static/media/phone-book.55d8da50.png"},75:function(e,t,a){e.exports=a(126)},80:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.b07fb567.chunk.js.map